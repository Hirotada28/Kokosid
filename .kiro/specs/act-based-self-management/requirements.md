# 要件定義書

## はじめに

Kokosid（ココシド）は、「ツールからパートナーへ」というビジョンのもと、単なるタスク管理を超えた次世代の自己管理パートナーアプリケーションです。「ココロ（心）」＋「Side（そばに）」を組み合わせた名前の通り、ユーザーの心に常に寄り添い、一番近くで見守るパートナーとして機能します。受容とコミットメント・セラピー（ACT）の心理学的フレームワークを基盤とし、AI技術を活用してユーザーの心理状態を深く理解し、実行機能の補完と自己肯定感の向上を同時に実現します。

### 核心的価値提案

- **心理的ミラーリング**：ユーザーの感情と思考パターンを可視化し、客観的な自己理解を促進
- **マイクロ・チャンキング**：ADHD傾向者でも実行可能な極小タスクへの自動分解
- **デジタル・バディ体験**：孤独感を軽減し、継続的な伴走を提供するAIコーチング
- **プライバシーファースト**：エンドツーエンド暗号化とローカルファースト設計による思考の保護

## 用語集

- **システム**: Kokosid（ココシド）アプリケーション
- **ユーザー**: アプリケーションを使用する個人
- **ACTフレームワーク**: 受容とコミットメント・セラピーの6つのコアプロセス
- **AI_エンジン**: ユーザーの心理状態分析と個別化支援を提供するAIシステム
- **価値**: ユーザーにとって重要な人生の方向性や原則
- **コミットされた行動**: 価値に基づいて選択される具体的な行動
- **心理的柔軟性**: 現在の瞬間に意識的に存在し、価値に基づいて行動する能力
- **マインドフルネス**: 現在の瞬間への意識的な注意
- **認知的脱フュージョン**: 思考や感情から距離を置く能力
- **受容**: 困難な感情や体験を避けずに受け入れること
- **マイクロ・チャンキング**: タスクを5分以内の極小単位に自動分解する機能
- **プレシジョン・ナッジング**: データに基づいた精密な通知最適化システム
- **デジタル・バディ**: AIによる共感的な伴走体験
- **暗号化キー**: エンドツーエンド暗号化に使用されるデバイス固有の秘密鍵

## 要件

### 要件1: マイクロ・チャンキング機能

**ユーザーストーリー:** ADHD傾向のあるユーザーとして、大きなタスクを実行可能な最小単位に自動分解してほしい。そうすることで、着手しやすくなり、実行機能不全を防げる。

#### 受入基準

1. ユーザーがタスクを入力するとき、システムは5分以内で完了可能な具体的ステップに自動分解する
2. 各ステップが生成されるとき、システムは具体的な動詞で始まる行動指示を提供する
3. ユーザーがステップを確認するとき、システムは成功条件を明確に表示する
4. システムは最初のステップを「準備」ではなく「実行」から開始する
5. システムは認知負荷軽減のため、分解ステップを最大7個までに制限する

### 要件2: ACTベースのAIコーチング

**ユーザーストーリー:** ユーザーとして、心理的な困難に直面したときにACTの原則に基づいた支援を受けたい。そうすることで、感情に振り回されずに価値に基づいた行動を選択できる。

#### 受入基準

1. ユーザーが否定的感情を表明するとき、システムは受容プロセスに基づいた共感的応答を提供する
2. ユーザーが自己批判的思考を示すとき、システムは認知的脱フュージョン技法を提案する
3. ユーザーがモチベーション低下を示すとき、システムは価値の明確化を支援する対話を開始する
4. システムはユーザーの過去の対話履歴を参照し、個別化された応答を生成する
5. システムは各対話でACTの6つのコアプロセスのうち最適なものを自動選択する

### 要件3: 音声入力と3層感情分析

**ユーザーストーリー:** ユーザーとして、音声で気持ちを記録し、テキストだけでは捉えきれない感情状態を分析してほしい。そうすることで、より深い自己理解と適切な支援を得られる。

#### 受入基準

1. ユーザーが音声を録音するとき、システムは音響特徴（ピッチ、発話速度、声量）から感情を推定する
2. システムが音声をテキスト化するとき、95%以上の精度で日本語を認識する
3. システムがテキストを分析するとき、6つの感情（喜び、悲しみ、怒り、不安、疲労、中立）を判定する
4. システムは過去7日間の感情トレンドと比較し、改善・悪化・安定の傾向を検出する
5. システムは音響分析とテキスト分析を統合し、総合的な感情スコアを算出する

### 要件4: プレシジョン・ナッジング（精密通知）

**ユーザーストーリー:** ユーザーとして、最適なタイミングと内容で通知を受け取りたい。そうすることで、行動に移しやすくなり、通知疲れを避けられる。

#### 受入基準

1. システムはユーザーの過去30日間のタスク完了データから生産的時間帯を学習する
2. システムが通知を送信するとき、現在の心理状態に応じてトーンを調整する
3. ユーザーが不安・疲労状態のとき、システムは優しいトーンで30分後再送設定を適用する
4. ユーザーがポジティブ状態のとき、システムは励ましトーンで即時送信する
5. システムは連続完了3個以上の場合、特別な達成感を演出する通知を送信する

### 要件5: エンドツーエンド暗号化とプライバシー保護

**ユーザーストーリー:** ユーザーとして、個人的な心理データを完全に安全に管理したい。そうすることで、安心してアプリケーションを使用し、深い自己開示ができる。

#### 受入基準

1. システムはデバイス初回起動時にAES-256暗号化キーを生成し、デバイス内のSecure Storageに保存する
2. ユーザーがデータを入力するとき、システムはローカルで暗号化してからサーバーに送信する
3. システムはサーバー側で暗号化されたデータのみを保持し、復号化キーを一切持たない
4. ユーザーがデータ削除を要求するとき、システムは30日以内に全データを完全削除する
5. システムはオフラインモードで基本機能（タスク管理、日記記録）を完全動作させる

### 要件6: 自己肯定感スコアの可視化

**ユーザーストーリー:** ユーザーとして、自分の心理的成長を数値とグラフで確認したい。そうすることで、客観的な進歩を実感し、継続的な動機を維持できる。

#### 受入基準

1. システムは過去7日間のタスク完了率、ポジティブ感情比率、継続日数、AI対話頻度から自己肯定感スコアを算出する
2. システムがスコアを計算するとき、重み係数（完了率30%、感情40%、継続20%、対話10%）を適用する
3. ユーザーがスコアを確認するとき、システムは推移グラフと算出根拠を表示する
4. システムは小さな進歩も認識し、0.05ポイント以上の向上で承認メッセージを表示する
5. システムは長期的な成長トレンドを分析し、30日間で平均+0.15ポイントの向上を目標とする

### 要件7: お祝い演出とモチベーション維持

**ユーザーストーリー:** ユーザーとして、タスク完了時に意味のある承認と視覚的フィードバックを受けたい。そうすることで、達成感を味わい、継続的な動機を維持できる。

#### 受入基準

1. ユーザーが5分タスクを完了するとき、システムはキラキラ星アニメーションを1秒間表示する
2. ユーザーが15分タスクを完了するとき、システムは紙吹雪アニメーションを1.5秒間表示する
3. ユーザーが連続達成を記録するとき、システムはストリーク炎アニメーションをループ表示する
4. システムはタスク完了時にパーソナライズされた賞賛メッセージを生成する
5. システムは過去の成功体験を記録し、困難な時期に思い出させる機能を提供する

### 要件8: 3タブUI設計とユーザビリティ

**ユーザーストーリー:** ユーザーとして、迷わず直感的に操作できるシンプルなインターフェースを使いたい。そうすることで、認知負荷を減らし、本質的な活動に集中できる。

#### 受入基準

1. システムは「今日」「対話」「軌跡」の3つのメインタブで構成する
2. 「今日」タブでは、気分選択、次のタスク提案、小さな達成リストを表示する
3. 「対話」タブでは、音声入力ボタン、過去の対話履歴、感情タグを表示する
4. 「軌跡」タブでは、自己肯定感グラフ、月間達成統計、成長トレンドを表示する
5. システムは各画面で60fps以上のスムーズなアニメーションを維持する